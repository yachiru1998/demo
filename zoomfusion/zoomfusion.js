
/* ZoomFusion Maps â€“ Fractional PanZoom Engine
 * Version 1.0.0
 * Author: Yachiru1998
 */

function _0x489b(_0x46cdc0,_0x18b364){const _0x191870=_0x1918();return _0x489b=function(_0x489b0f,_0x274ce8){_0x489b0f=_0x489b0f-0x166;let _0x115421=_0x191870[_0x489b0f];return _0x115421;},_0x489b(_0x46cdc0,_0x18b364);}function _0x1918(){const _0x70c94f=['pointerup','pointermove','style','clientX','getBoundingClientRect','deltaY','addEventListener','width','calc','firstChild','clientHeight','cursor','8208972ROEGhx','6CRglDU','endCol','pow','top','startRow','tiles','movementX','manager','scale','map','url(','innerHTML','2934NGKGdq','1172836eCmkVF','3290903MQCwxK','tile-overlay','floor','grabbing','grab','tileSize','pointerdown','startCol','<br>z:','createElement','lastY','endRow','isDragging','4529290GCjbGg','update','left','className','1483604dCfiLt','<br>y:','zoomFactor','.png','63780eydCMz','getTileURL','wheel','4iSqXcO','appendChild','zoom','log','div','min','panY','https://tile.openstreetmap.org/','tile','zInt','2741888KERRsF','ceil','max','lastX','panX','log2'];_0x1918=function(){return _0x70c94f;};return _0x1918();}const _0x3963c4=_0x489b;(function(_0x58696f,_0x54e150){const _0x1cf9a7=_0x489b,_0x3000c4=_0x58696f();while(!![]){try{const _0x5f3f77=parseInt(_0x1cf9a7(0x196))/0x1+-parseInt(_0x1cf9a7(0x1a8))/0x2*(-parseInt(_0x1cf9a7(0x189))/0x3)+parseInt(_0x1cf9a7(0x16c))/0x4*(parseInt(_0x1cf9a7(0x1a4))/0x5)+-parseInt(_0x1cf9a7(0x188))/0x6+parseInt(_0x1cf9a7(0x197))/0x7+parseInt(_0x1cf9a7(0x176))/0x8+parseInt(_0x1cf9a7(0x195))/0x9*(-parseInt(_0x1cf9a7(0x169))/0xa);if(_0x5f3f77===_0x54e150)break;else _0x3000c4['push'](_0x3000c4['shift']());}catch(_0x5cbee4){_0x3000c4['push'](_0x3000c4['shift']());}}}(_0x1918,0xe281d));class TileCalculator{constructor(_0x3559a1=0x100){const _0x133dc0=_0x489b;this[_0x133dc0(0x19c)]=_0x3559a1;}['computeView'](_0x304f95,_0x22928c,_0x5b0003,_0x474bfe,_0x173eac){const _0x2f2905=_0x489b,_0x326a57=Math[_0x2f2905(0x199)](_0x5b0003),_0x18eb74=Math[_0x2f2905(0x18b)](0x2,_0x5b0003-_0x326a57),_0x4bc767=_0x304f95/_0x18eb74,_0x38de42=_0x22928c/_0x18eb74,_0x11f460=Math[_0x2f2905(0x199)](-_0x4bc767/this[_0x2f2905(0x19c)]),_0x2adb23=Math[_0x2f2905(0x177)]((_0x474bfe/_0x18eb74-_0x4bc767)/this['tileSize']),_0x2aed44=Math[_0x2f2905(0x199)](-_0x38de42/this['tileSize']),_0x20a336=Math[_0x2f2905(0x177)]((_0x173eac/_0x18eb74-_0x38de42)/this[_0x2f2905(0x19c)]);return{'zInt':_0x326a57,'scale':_0x18eb74,'startCol':_0x11f460,'endCol':_0x2adb23,'startRow':_0x2aed44,'endRow':_0x20a336};}['getTilePosition'](_0x132056,_0x27c3cf,_0x439fd1,_0xac19d8,_0x1bb5d0){const _0x213399=_0x489b;return{'left':_0x132056*this[_0x213399(0x19c)]*_0x439fd1+_0xac19d8,'top':_0x27c3cf*this[_0x213399(0x19c)]*_0x439fd1+_0x1bb5d0,'size':this['tileSize']*_0x439fd1};}}class TileManager{constructor(_0x24767a,_0x46aaaa){const _0x1ced5c=_0x489b;this[_0x1ced5c(0x192)]=_0x24767a,this[_0x1ced5c(0x184)]=_0x46aaaa,this[_0x1ced5c(0x18e)]={};}[_0x3963c4(0x16a)](_0x18972,_0x3dedaa,_0x44967d){const _0x29fd75=_0x3963c4;return _0x29fd75(0x173)+_0x18972+'/'+_0x3dedaa+'/'+_0x44967d+_0x29fd75(0x168);}[_0x3963c4(0x1a5)](_0x423151,_0xd9376,_0x462149){const _0x4bac73=_0x3963c4,_0x467e8b=this[_0x4bac73(0x192)]['clientWidth'],_0xdfb2e3=this[_0x4bac73(0x192)][_0x4bac73(0x186)];console[_0x4bac73(0x16f)](_0x4bac73(0x183),_0x467e8b,_0xdfb2e3);const _0x26db28=this[_0x4bac73(0x184)]['computeView'](_0x423151,_0xd9376,_0x462149,_0x467e8b,_0xdfb2e3);for(const _0x17c985 in this[_0x4bac73(0x18e)]){const [_0x581adc,_0x4da041,_0xf62df9]=_0x17c985['split'](',')[_0x4bac73(0x192)](Number);(_0x581adc!==_0x26db28['zInt']||_0x4da041<_0x26db28['startCol']||_0x4da041>_0x26db28['endCol']||_0xf62df9<_0x26db28[_0x4bac73(0x18d)]||_0xf62df9>_0x26db28[_0x4bac73(0x1a2)])&&(this[_0x4bac73(0x192)]['removeChild'](this[_0x4bac73(0x18e)][_0x17c985]),delete this[_0x4bac73(0x18e)][_0x17c985]);}for(let _0x3cd67e=_0x26db28[_0x4bac73(0x19e)];_0x3cd67e<=_0x26db28[_0x4bac73(0x18a)];_0x3cd67e++){for(let _0xc57752=_0x26db28[_0x4bac73(0x18d)];_0xc57752<=_0x26db28[_0x4bac73(0x1a2)];_0xc57752++){const _0x198af9=_0x26db28[_0x4bac73(0x175)]+','+_0x3cd67e+','+_0xc57752,{left:_0x4375eb,top:_0x283e66,size:_0x95fd77}=this[_0x4bac73(0x184)]['getTilePosition'](_0x3cd67e,_0xc57752,_0x26db28[_0x4bac73(0x191)],_0x423151,_0xd9376);if(!this[_0x4bac73(0x18e)][_0x198af9]){const _0x4c3972=document[_0x4bac73(0x1a0)](_0x4bac73(0x170));_0x4c3972['className']=_0x4bac73(0x174),_0x4c3972[_0x4bac73(0x17e)][_0x4bac73(0x183)]=_0x95fd77+'px',_0x4c3972[_0x4bac73(0x17e)]['height']=_0x95fd77+'px',_0x4c3972[_0x4bac73(0x17e)]['left']=_0x4375eb+'px',_0x4c3972[_0x4bac73(0x17e)][_0x4bac73(0x18c)]=_0x283e66+'px',_0x4c3972[_0x4bac73(0x17e)]['backgroundImage']=_0x4bac73(0x193)+this[_0x4bac73(0x16a)](_0x26db28[_0x4bac73(0x175)],_0x3cd67e,_0xc57752)+')';const _0xc49a08=document['createElement'](_0x4bac73(0x170));_0xc49a08[_0x4bac73(0x1a7)]=_0x4bac73(0x198),_0xc49a08[_0x4bac73(0x194)]='x:'+_0x3cd67e+_0x4bac73(0x166)+_0xc57752+_0x4bac73(0x19f)+_0x26db28[_0x4bac73(0x175)],_0x4c3972[_0x4bac73(0x16d)](_0xc49a08),this[_0x4bac73(0x192)]['appendChild'](_0x4c3972),this[_0x4bac73(0x18e)][_0x198af9]=_0x4c3972;}else{const _0x600700=this[_0x4bac73(0x18e)][_0x198af9];_0x600700[_0x4bac73(0x17e)]['width']=_0x95fd77+'px',_0x600700[_0x4bac73(0x17e)]['height']=_0x95fd77+'px',_0x600700[_0x4bac73(0x17e)][_0x4bac73(0x1a6)]=_0x4375eb+'px',_0x600700['style']['top']=_0x283e66+'px',_0x600700[_0x4bac73(0x185)][_0x4bac73(0x194)]='x:'+_0x3cd67e+_0x4bac73(0x166)+_0xc57752+_0x4bac73(0x19f)+_0x26db28['zInt'];}}}}}class SimplePanZoom{constructor(_0x5dd4e4,_0x2f2fea){const _0x19c617=_0x3963c4;this[_0x19c617(0x192)]=_0x5dd4e4,this[_0x19c617(0x190)]=_0x2f2fea,this[_0x19c617(0x17a)]=0x0,this['panY']=0x0,this[_0x19c617(0x16e)]=0x1,this[_0x19c617(0x167)]=1.1,this[_0x19c617(0x1a3)]=![],this[_0x19c617(0x179)]=0x0,this['lastY']=0x0,this['initEvents'](),this['manager'][_0x19c617(0x1a5)](this['panX'],this[_0x19c617(0x172)],this[_0x19c617(0x16e)]);}['initEvents'](){const _0x405657=_0x3963c4;this[_0x405657(0x192)][_0x405657(0x182)](_0x405657(0x19d),_0x2e1e4a=>{const _0x257949=_0x405657;this[_0x257949(0x1a3)]=!![],this[_0x257949(0x179)]=_0x2e1e4a['x'],this[_0x257949(0x1a1)]=_0x2e1e4a['y'],this['map']['style'][_0x257949(0x187)]=_0x257949(0x19a);}),window['addEventListener'](_0x405657(0x17c),()=>{const _0xf98c09=_0x405657;this[_0xf98c09(0x1a3)]=![],this[_0xf98c09(0x192)][_0xf98c09(0x17e)][_0xf98c09(0x187)]=_0xf98c09(0x19b);}),window['addEventListener'](_0x405657(0x17d),_0x6cebd1=>{const _0x4a9450=_0x405657;if(!this[_0x4a9450(0x1a3)])return;this['panX']+=_0x6cebd1[_0x4a9450(0x18f)],this[_0x4a9450(0x172)]+=_0x6cebd1['movementY'],this[_0x4a9450(0x1a5)]();}),this[_0x405657(0x192)]['addEventListener'](_0x405657(0x16b),_0x1c3bd8=>{const _0x243bc7=_0x405657;_0x1c3bd8['preventDefault']();const _0x560c23=this[_0x243bc7(0x192)][_0x243bc7(0x180)](),_0x2d4ee4=_0x1c3bd8[_0x243bc7(0x17f)]-_0x560c23[_0x243bc7(0x1a6)],_0x2c619e=_0x1c3bd8['clientY']-_0x560c23[_0x243bc7(0x18c)],_0x247f73=(_0x2d4ee4-this[_0x243bc7(0x17a)])/Math[_0x243bc7(0x18b)](0x2,this[_0x243bc7(0x16e)]),_0x1a8f95=(_0x2c619e-this[_0x243bc7(0x172)])/Math[_0x243bc7(0x18b)](0x2,this[_0x243bc7(0x16e)]);if(_0x1c3bd8[_0x243bc7(0x181)]<0x0)this['zoom']+=Math['log2'](this[_0x243bc7(0x167)]);else this[_0x243bc7(0x16e)]-=Math[_0x243bc7(0x17b)](this[_0x243bc7(0x167)]);this[_0x243bc7(0x16e)]=Math[_0x243bc7(0x178)](0x0,Math[_0x243bc7(0x171)](0x13,this['zoom'])),this[_0x243bc7(0x17a)]=_0x2d4ee4-_0x247f73*Math['pow'](0x2,this[_0x243bc7(0x16e)]),this[_0x243bc7(0x172)]=_0x2c619e-_0x1a8f95*Math[_0x243bc7(0x18b)](0x2,this[_0x243bc7(0x16e)]),this['update']();},{'passive':![]});}[_0x3963c4(0x1a5)](){const _0x4f9342=_0x3963c4;this[_0x4f9342(0x190)][_0x4f9342(0x1a5)](this[_0x4f9342(0x17a)],this['panY'],this['zoom']);}}